apply plugin: 'liberty'

buildscript {
    repositories{
      mavenLocal()
      mavenCentral()
      maven {
            name = 'Sonatype Nexus Snapshots'
            url = 'https://oss.sonatype.org/content/repositories/snapshots/'
      }
    }
    dependencies {
        classpath 'net.wasdev.wlp.gradle.plugins:liberty-gradle-plugin:2.5-SNAPSHOT'
    }
}

repositories {
      mavenLocal()
      mavenCentral()
}

dependencies {
    libertyRuntime 'io.openliberty:openliberty-runtime:18.0.0.2'
}

liberty {
    server {
        name = "dummy"
        packageLiberty {
            archive = "${buildDir}/openliberty-kernel.zip"
            include = "minify"
            os = "Linux"
        }
    }
}

task overwriteServer(type: Copy) {
    def replacementServer = file("server.xml")
    def existingServerDir = file("${buildDir}/wlp/usr/servers/dummy")
  
    from replacementServer
    into existingServerDir
    
  }
